<!DOCTYPE html><html><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Hotels - APIs for Expedia Partners</title><link rel="stylesheet" href="/css/foundation.min.css">
<link rel="stylesheet" href="/css/code/styles/github-gist.css">
<link rel="stylesheet" href="https://cdn.datatables.net/1.10.11/css/jquery.dataTables.min.css">
<link rel="stylesheet" href="/css/styles.css">
<script src="/js/jquery.js"></script>
<script src="/js/jquery.DataTables.min.js"></script>
<script src="/js/highlight.pack.js"></script>
<script src="/js/foundation.min.js"></script>
<script src="/js/Core.js"></script>
<script src="/js/epsga.js"></script>
<script src="/js/gaEventTracking.js"></script>
<script>
    $(document).ready(function() {
        $('.api-content pre>code').each(function(i, block) {
            hljs.highlightBlock(block);
        });
        Core.init();
    });
</script>
<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-33281064-1', 'auto');
    ga('send', 'pageview');
</script>
<script type="text/javascript">
    function googleTranslateElementInit() {
        new google.translate.TranslateElement({pageLanguage: 'en', layout: google.translate.TranslateElement.FloatPosition.TOP_LEFT, gaTrack: true, gaId: 'UA-33281064-1'}, 'google_translate_element');
    }
</script>
<script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script></head><div id="google_translate_element" style="display: none;"></div>
<div class="row full-width">
    <nav class="large-12 small-12 columns" id="sitenav">
        <a class="logo" href="/"><img src="/images/DevLogo_40k.png"/></a>
        <a class="feedback show-for-medium-up" href="mailto:eqcss@expedia.com">Contact Support</a>
        <a class="feedback show-for-medium-up" href="http://expediaquickconnect.com">Legacy Quickconnect</a>
    </nav>
</div><div class="row full-width"><div class="large-6 large-centered medium-10 medium-centered columns index-content"><h1>EPC Hotels</h1>
<p class="announce">
    Below is a list of hotels associated with your account.
</p>
<table id="hotels" style="display: none;" class="display" cellspacing="0" width="100%"></table>
<form style="margin-bottom: 200px;" onsubmit="return false;">
    <div id="result" class="formline center"></div>
    <div class="formline"><input class="submit" type="button" value="Request Hotel" onclick="autoAssignHotel();"/></div>
</form>
<!--[if lte IE 9]>
<script src="/js/base64.js"></script>
<!--<![endif]-->
<script>
    function dateNow(h) {
        var instant = new Date();
        if (typeof h == 'undefined') return instant.toString();
        instant.setTime(instant.getTime() + h * 60 * 60 * 1000)
        return instant.toString();
    }

    var testdata = [
        [ "0001", "Hotel1", dateNow(1), dateNow(4) ],
        [ "0002", "Hotel2", dateNow(2), dateNow(8) ],
        [ "0003", "Hotel3", dateNow(3), dateNow(16) ],
        [ "0004", "Hotel4", dateNow(4), dateNow(24) ],
        [ "0005", "Hotel5", dateNow(5), dateNow(32) ],
        [ "0006", "Hotel6", dateNow(6), dateNow(40) ],
        [ "0007", "Hotel7", dateNow(7), dateNow(48) ]
    ];

    var columns = [
        { title: "TUID" },
        { title: "Hotel ID" },
        { title: "Valid From", type: "date" },
        { title: "Valid To", type: "date" }
    ];

    $(document).ready(function() {
        getHotelsByJwt();
    });

    function jwtRequest(url, done, error) {
        $.ajax({
            method: "POST",
            url: url,
            xhrFields: {
                withCredentials: true,
                XDomainRequest: true
            },
            beforeSend: function(xhr) {
                if (typeof(btoa) !== "function") {
                    btoa = Base64.encode
                }
                xhr.setRequestHeader("Authorization", "Bearer " + btoa(localStorage.getItem("AuthToken")));
            }
        }).done(done).fail(error);
    }

    function getHotelsByJwt() {
        jwtRequest("http://localhost:8080/properties/jwt", function(data, textStatus, jqxhr) {
            console.log("Ajax Success: " + jqxhr.url);
            console.log("Response: " + jqxhr.responseText);
            $("#result").removeClass("error").text("Success: " + jqxhr.responseText);
        }, ajaxError);
    }

    function autoAssignHotel() {
        jwtRequest("http://localhost:8080/properties/jwt", function(data, textStatus, jqxhr) {
            console.log("Ajax Success: " + jqxhr.url);
            console.log("Response: " + jqxhr.responseText);
            $("#result").removeClass("error").text("Success: " + jqxhr.responseText);
        }, function(jqxhr) {
            ajaxError(jqxhr);
            $("#hotels").DataTable({ data: testdata, columns: columns });
            $("#hotels").show();
        });
    }

    function ajaxError(jqxhr) {
        console.log("Ajax Error: " + jqxhr.url);
        console.log("Error Response: " + jqxhr.responseText);
        $("#result").addClass("error").text("Error: " + jqxhr.responseText);
    }
</script></div></div><div class="row full-width footer">
    <div class="large-8 large-centered columns">
        <div class="links text-center">
            <a class="link-item" href="https://expediagso.secure.force.com/kb/pkb_Home?l=en_US" target="_blank">Contact Expedia</a> |
            <a class="link-item" href="/terms.html">Terms and Conditions</a>
        </div>
        <div class="show-for-large-up">
            <div class="footer-logo">&nbsp;</div>
        </div>
        <div>Â© 2015 Expedia, Inc. All rights reserved. Confidential and proprietary.</div>
    </div>
</div>
<input type="hidden" id="eventTrackingTeamName" value="EPSConnectivityBNE" />
<input type="hidden" id="eventTrackingGAAccount" value="UA-33281064-1" />
<input type="hidden" id="eventTrackingIsOnboarding" value="" /><input type="hidden" id="eventTrackingPageName" value="Hotels"/></html>