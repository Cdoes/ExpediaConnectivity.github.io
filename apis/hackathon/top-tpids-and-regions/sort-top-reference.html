<!DOCTYPE html><html><head><meta charset="utf-8"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="description"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Reference - Top TPIDs And Regions (Experimental)</title><link rel="stylesheet" href="/css/normalize.css"><link rel="stylesheet" href="/css/foundation.min.css"><link rel="stylesheet" href="/css/code/styles/github-gist.css"><link rel="stylesheet" href="/css/styles.css"><link rel="icon" href="/favicon.ico"><link rel="stylesheet" href="/css/he-animate.css"><script src="/js/jquery.js"></script><script src="/js/vendor/modernizr.js"></script><script src="/js/highlight.pack.js"></script><script src="/js/foundation.min.js"></script><script src="/js/Core.js"></script><script src="/js/he-main.js"></script><script src="/js/he-plugins.js"></script><script src="/js/he-smoothscroll.js"></script><script src="/js/he-waypoints.js"></script><script src="/js/environment.js"></script><script>$(document).ready(function() {
    $('.api-content pre>code').each(function(i, block) {
        hljs.highlightBlock(block);
    });
    Core.init();
});
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-79394707-1', 'auto');
ga('send', 'pageview');
function googleTranslateElementInit() {
    new google.translate.TranslateElement({pageLanguage: 'en', layout: google.translate.TranslateElement.FloatPosition.TOP_LEFT, gaTrack: true, gaId: 'UA-79394707-1'}, 'google_translate_element');
}</script><script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script></head><body><div id="google_translate_element" style="display: none"></div><header id="site-navigation"><nav class="row full-width" id="nav-top"><div class="inner"><ul><li id="adminnav" style="display:none"><a href="/test-properties/schedules-admin">Admin Schedules View</a></li><li id="hotelnav" style="display:none"><a href="/test-properties/schedules">Schedules</a></li><li id="logoutnav" style="display:none"><a href="/test-properties/" onclick="logout();">Logout</a></li></ul></div></nav><nav class="row full-width" id="nav-main"><div class="inner"><a id="logo" href="/"><img src="/images/DevLogo_40k.png"/></a><div class="hide-for-large" id="menu-toggle"></div><div id="menu-wrap"><div class="hide-for-large"></div><ul><li class="mainlink"><a href="/providers">Connectivity for Providers</a></li><li class="mainlink"><a href="/properties">Connectivity for Properties</a></li><li class="mainlink"><a href="/systems">Systems</a></li><li class="mainlink"><a href="/developer">Developer APIs</a></li><li class="mainlink"><a href="/blog">Blog</a></li><li class="mainlink"><a href="/contact-us">Contact Us</a></li></ul></div></div></nav></header><div class="row full-width"><div class="off-canvas-nav-bar sticky" id="mobileMenuBar"><nav class="title-bar hide-for-large" data-topbar="" role="navigation"><section class="title-bar-left"><button class="menu-icon" type="button" style="outline: none" data-toggle="mobileMenu"><span></span></button></section><span class="title-bar-title"></span></nav></div></div><div class="row full-width"><div class="show-for-large large-3 columns menu"><nav role="navigation" class="sidebar-nav"><header>Top TPIDs And Regions (Experimental)</header><ul class="sidebar-nav-items columns" data-magellan-expedition><li class="pagename"><a class="sidebar-nav-item" href="/apis/hackathon/top-tpids-and-regions/quickstart.html">Quick Start</a></li><li class="pagename" data-magellan-arrival="reference"><a class="sidebar-nav-item" href="#reference">Reference</a></li><li class="depth2" data-magellan-arrival="authentication"><a class="sidebar-nav-item" href="#authentication">Authentication</a></li><li class="depth2" data-magellan-arrival="top-points-of-sale-and-regions-endpoint"><a class="sidebar-nav-item" href="#top-points-of-sale-and-regions-endpoint">Top Points of Sale and Regions Endpoint</a></li><li class="depth2" data-magellan-arrival="request-parameters"><a class="sidebar-nav-item" href="#request-parameters">Request Parameters</a></li><li class="depth2" data-magellan-arrival="response-format"><a class="sidebar-nav-item" href="#response-format">Response Format</a></li><li class="depth2" data-magellan-arrival="tpid-to-point-of-sale-mapping"><a class="sidebar-nav-item" href="#tpid-to-point-of-sale-mapping">TPID to Point of Sale Mapping</a></li><li class="depth2" data-magellan-arrival="error-messages"><a class="sidebar-nav-item" href="#error-messages">Error Messages</a></li><li class="pagename"><a class="sidebar-nav-item" href="/apis/hackathon/top-tpids-and-regions/try-it.html">Try It</a></li></ul></nav></div><div class="off-canvas-wrapper"><div class="off-canvas-wrapper-inner" data-off-canvas-wrapper=""><div class="off-canvas position-left hide-for-large" id="mobileMenu" data-off-canvas="" data-auto-focus="false"></div><div class="off-canvas-content" data-off-canvas-content=""><div class="small-12 medium-10 medium-offset-1 large-8 large-offset-3 xlarge-8 xxlarge-6 columns end api-content"><h1 id="reference" data-magellan-destination="reference">Reference</h1>
<h2 id="authentication" data-magellan-destination="authentication">Authentication</h2>
<p>The top points of sale and regions API requires HTTP basic auth credentials to be supplied with every request.</p>
<p>Credentials must match a valid API username/password.  the credentials must be authorized to access data for the hotel being requested.</p>
<h2 id="top-points-of-sale-and-regions-endpoint" data-magellan-destination="top-points-of-sale-and-regions-endpoint">Top Points of Sale and Regions Endpoint</h2>
<pre><code>GET /lodging-sort/v1/hops/HopsTopTpidsAndRegions
</code></pre><p>The top points of sale and regions endpoint will return a sorted list of top regions for each of the top points of sale by bookings for a specified hotel.</p>
<p>This API is based on data that gets computed every day at 11am UTC, and uses data from the previous 24h. A hotel will only surface via this API if it received at least 5 valid searches (based on expedia prefered sort rank) on at least one of 3 Expedia core Points of Sale (Expedia.com US, Travelocity.com US and Orbitz.com US) in the 24h period before 11am UTC. Otherwise it won&#39;t surface until the next day, if it meets the criteria mentioned above.</p>
<h2 id="request-parameters" data-magellan-destination="request-parameters">Request Parameters</h2>
<div><table>
<thead>
<tr>
<th>Name</th>
<th>Parameter Type</th>
<th>Data Type</th>
<th>Example</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>hotelId</code></td>
<td>Query</td>
<td>Integer</td>
<td><code>123</code></td>
<td>Hotel identifier</td>
</tr>
</tbody>
</table>
</div><h5 id="sample-request-with-all-parameters-specified" data-magellan-destination="sample-request-with-all-parameters-specified">Sample Request with all parameters specified</h5>
<pre><code>https://services.expediapartnercentral.com/lodging-sort/v1/hops/HopsTopTpidsAndRegions?hotelId=1
</code></pre><h2 id="response-format" data-magellan-destination="response-format">Response Format</h2>
<div><table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>hotelId</td>
<td>Integer</td>
<td>Unique identifier for a property/hotel.</td>
</tr>
<tr>
<td>tpid</td>
<td>Integer</td>
<td>Point of Sale ID. Please refer to the mapping table below to resolve this to an expedia point of sale name.</td>
</tr>
<tr>
<td>regionId</td>
<td>Long</td>
<td>GAIA region ID. Please use the Gaia API referenced on this developer portal to resolve this gaia ID to a region name with coordinates.</td>
</tr>
</tbody>
</table>
</div><h5 id="sample-response" data-magellan-destination="sample-response">Sample Response</h5>
<pre><code>{
    &quot;hopsTpidsList&quot;: [
        {
            &quot;sortedRegionList&quot;: [
                2114,
                800053,
                6144914
            ],
            &quot;tpid&quot;: 3101
        },
        {
            &quot;sortedRegionList&quot;: [
                2114
            ],
            &quot;tpid&quot;: 3109
        },
        {
            &quot;sortedRegionList&quot;: [
                2114
            ],
            &quot;tpid&quot;: 3107
        }
    ],
    &quot;hotelId&quot;: 1
}
</code></pre><h2 id="tpid-to-point-of-sale-mapping" data-magellan-destination="tpid-to-point-of-sale-mapping">TPID to Point of Sale Mapping</h2>
<p>The point of sale is encoded into an ID called a tpid.  All possible values for point of sale are listed below:</p>
<div><table>
<thead>
<tr>
<th>Point of Sale</th>
<th>TPID</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>Expedia US</td>
</tr>
<tr>
<td>3</td>
<td>Expedia UK</td>
</tr>
<tr>
<td>4</td>
<td>Expedia Canada</td>
</tr>
<tr>
<td>6</td>
<td>Expedia.de Reisen</td>
</tr>
<tr>
<td>7</td>
<td>voyages-sncf.com</td>
</tr>
<tr>
<td>8</td>
<td>Expedia.it</td>
</tr>
<tr>
<td>9</td>
<td>Expedia ES</td>
</tr>
<tr>
<td>10</td>
<td>Expedia.se</td>
</tr>
<tr>
<td>11</td>
<td>Expedia.nl</td>
</tr>
<tr>
<td>12</td>
<td>Expedia Mexico</td>
</tr>
<tr>
<td>14</td>
<td>Expedia.com.sg</td>
</tr>
<tr>
<td>15</td>
<td>Expedia Malaysia</td>
</tr>
<tr>
<td>16</td>
<td>Expedia Korea</td>
</tr>
<tr>
<td>17</td>
<td>Expedia Thailand</td>
</tr>
<tr>
<td>18</td>
<td>Expedia Hong Kong</td>
</tr>
<tr>
<td>20</td>
<td>Expedia.fr</td>
</tr>
<tr>
<td>25</td>
<td>Expedia Australia</td>
</tr>
<tr>
<td>27</td>
<td>Expedia India</td>
</tr>
<tr>
<td>28</td>
<td>Expedia Japan</td>
</tr>
<tr>
<td>29</td>
<td>Expedia.co.nz</td>
</tr>
<tr>
<td>34</td>
<td>Hotels.com en Espanol</td>
</tr>
<tr>
<td>39</td>
<td>Egencia Europe</td>
</tr>
<tr>
<td>40</td>
<td>Egencia UK</td>
</tr>
<tr>
<td>41</td>
<td>Egencia Germany</td>
</tr>
<tr>
<td>61</td>
<td>Expedia Indonesia</td>
</tr>
<tr>
<td>62</td>
<td>Expedia Taiwan</td>
</tr>
<tr>
<td>63</td>
<td>Expedia Ireland</td>
</tr>
<tr>
<td>64</td>
<td>Expedia Belgium</td>
</tr>
<tr>
<td>65</td>
<td>Expedia Sweden</td>
</tr>
<tr>
<td>66</td>
<td>Expedia Norway</td>
</tr>
<tr>
<td>67</td>
<td>Expedia Denmark</td>
</tr>
<tr>
<td>68</td>
<td>Expedia Philippines</td>
</tr>
<tr>
<td>69</td>
<td>Expedia Brazil</td>
</tr>
<tr>
<td>70</td>
<td>Expedia Argentina</td>
</tr>
<tr>
<td>71</td>
<td>Expedia Vietnam</td>
</tr>
<tr>
<td>72</td>
<td>Switzerland</td>
</tr>
<tr>
<td>73</td>
<td>Expedia Finland</td>
</tr>
<tr>
<td>74</td>
<td>Expedia Russia</td>
</tr>
<tr>
<td>75</td>
<td>Expedia China</td>
</tr>
<tr>
<td>3000</td>
<td>Hotels LATAM USD</td>
</tr>
<tr>
<td>3001</td>
<td>Hotels US USD</td>
</tr>
<tr>
<td>3002</td>
<td>Hotels Canada CAD</td>
</tr>
<tr>
<td>3003</td>
<td>Hotels Brazil BRL</td>
</tr>
<tr>
<td>3004</td>
<td>Hotels Mexico MXN</td>
</tr>
<tr>
<td>3018</td>
<td>Hotels Brazil Local</td>
</tr>
<tr>
<td>3019</td>
<td>Hotels Argentina ARS</td>
</tr>
<tr>
<td>3100</td>
<td>Hotels EMEA USD</td>
</tr>
<tr>
<td>3101</td>
<td>Hotels UK GBP</td>
</tr>
<tr>
<td>3102</td>
<td>Hotels Germany EUR</td>
</tr>
<tr>
<td>3103</td>
<td>Hotels Italy EUR</td>
</tr>
<tr>
<td>3104</td>
<td>Hotels Spain EUR</td>
</tr>
<tr>
<td>3105</td>
<td>Hotels Netherlands EUR</td>
</tr>
<tr>
<td>3107</td>
<td>Hotels Sweden SEK</td>
</tr>
<tr>
<td>3109</td>
<td>Hotels Norway NOK</td>
</tr>
<tr>
<td>3110</td>
<td>Hotels Denmark DEK</td>
</tr>
<tr>
<td>3111</td>
<td>Hotels Switzerland CHF</td>
</tr>
<tr>
<td>3112</td>
<td>Hotels Russia RUB</td>
</tr>
<tr>
<td>3113</td>
<td>Hotels Israel ILS</td>
</tr>
<tr>
<td>3114</td>
<td>Hotels South Africa ZAR</td>
</tr>
<tr>
<td>3115</td>
<td>Hotels Turkey TRY</td>
</tr>
<tr>
<td>3116</td>
<td>Hotels Poland PLN</td>
</tr>
<tr>
<td>3117</td>
<td>Hotels United Arab Emirates AED</td>
</tr>
<tr>
<td>3118</td>
<td>Hotels Saudi Arabia SAR</td>
</tr>
<tr>
<td>3119</td>
<td>Hotels Egypt EGP</td>
</tr>
<tr>
<td>3180</td>
<td>Hotels EMEA EUR</td>
</tr>
<tr>
<td>3200</td>
<td>Hotels APAC USD</td>
</tr>
<tr>
<td>3201</td>
<td>Hotels Australia AUD</td>
</tr>
<tr>
<td>3202</td>
<td>Hotels India INR</td>
</tr>
<tr>
<td>3203</td>
<td>Hotels Japan JPY</td>
</tr>
<tr>
<td>3204</td>
<td>Hotels New Zealand NZD</td>
</tr>
<tr>
<td>3205</td>
<td>Hotels Hong Kong HKD</td>
</tr>
<tr>
<td>3206</td>
<td>Hotels Singapore SGD</td>
</tr>
<tr>
<td>3207</td>
<td>Hotels Korea KRW</td>
</tr>
<tr>
<td>3208</td>
<td>Hotels China CNY</td>
</tr>
<tr>
<td>3209</td>
<td>Hotels Thailand THB</td>
</tr>
<tr>
<td>3210</td>
<td>Hotels Malaysia MYR</td>
</tr>
<tr>
<td>3211</td>
<td>Hotels Taiwan TWD</td>
</tr>
<tr>
<td>3212</td>
<td>Hotels Indonesia IDR</td>
</tr>
<tr>
<td>3213</td>
<td>Hotels Vietnam VND</td>
</tr>
<tr>
<td>3214</td>
<td>Hotels Philippines PHP</td>
</tr>
<tr>
<td>3301</td>
<td>Hotels.com Mobile US USD</td>
</tr>
<tr>
<td>3401</td>
<td>Hotels.com Mobile UK GBP</td>
</tr>
<tr>
<td>3480</td>
<td>Hotels.com Mobile EMEA EUR</td>
</tr>
<tr>
<td>6010</td>
<td>Hotwire</td>
</tr>
<tr>
<td>7102</td>
<td>Egencia Germany EUR</td>
</tr>
<tr>
<td>7103</td>
<td>Egencia Italy EUR</td>
</tr>
<tr>
<td>7104</td>
<td>Egencia Spain EUR</td>
</tr>
<tr>
<td>7105</td>
<td>Egencia Netherlands EUR</td>
</tr>
<tr>
<td>7107</td>
<td>Egencia Sweden SEK</td>
</tr>
<tr>
<td>7109</td>
<td>Egencia Norway NOK</td>
</tr>
<tr>
<td>7110</td>
<td>Egencia Denmark DEK</td>
</tr>
<tr>
<td>7111</td>
<td>Egencia Switzerland CHF</td>
</tr>
<tr>
<td>7114</td>
<td>Egencia Belgium EUR</td>
</tr>
<tr>
<td>7115</td>
<td>Egencia Ireland EUR</td>
</tr>
<tr>
<td>7116</td>
<td>Egencia Australia AUD</td>
</tr>
<tr>
<td>60000</td>
<td>Egencia</td>
</tr>
<tr>
<td>60003</td>
<td>Egencia-UK</td>
</tr>
<tr>
<td>60004</td>
<td>Egencia - CA</td>
</tr>
<tr>
<td>60006</td>
<td>Egencia-DE</td>
</tr>
<tr>
<td>60008</td>
<td>Egencia-IT</td>
</tr>
<tr>
<td>60009</td>
<td>Egencia-ES</td>
</tr>
<tr>
<td>60010</td>
<td>Egencia-SE</td>
</tr>
<tr>
<td>60011</td>
<td>Egencia-NL</td>
</tr>
<tr>
<td>60013</td>
<td>Egencia-DK</td>
</tr>
<tr>
<td>60020</td>
<td>Egencia-FR</td>
</tr>
<tr>
<td>60025</td>
<td>Egencia-AU</td>
</tr>
<tr>
<td>60027</td>
<td>Egencia - IN</td>
</tr>
<tr>
<td>60035</td>
<td>Egencia-NO</td>
</tr>
<tr>
<td>60080</td>
<td>Egencia-BE</td>
</tr>
<tr>
<td>60081</td>
<td>Egencia-IE</td>
</tr>
<tr>
<td>60082</td>
<td>Egencia-CH</td>
</tr>
<tr>
<td>60083</td>
<td>Egencia-FI</td>
</tr>
<tr>
<td>70125</td>
<td>Wotif AU</td>
</tr>
<tr>
<td>70129</td>
<td>Wotif NZ</td>
</tr>
<tr>
<td>70201</td>
<td>Orbitz</td>
</tr>
<tr>
<td>70301</td>
<td>CheapTickets</td>
</tr>
<tr>
<td>70403</td>
<td>ebookers.com</td>
</tr>
<tr>
<td>70406</td>
<td>ebookers.de</td>
</tr>
<tr>
<td>70420</td>
<td>ebookers.fr</td>
</tr>
<tr>
<td>70463</td>
<td>ebookers.ie</td>
</tr>
<tr>
<td>70465</td>
<td>MrJet.se</td>
</tr>
<tr>
<td>70472</td>
<td>ebookers.ch</td>
</tr>
<tr>
<td>70473</td>
<td>ebookers.fi</td>
</tr>
<tr>
<td>80001</td>
<td>Travelocity.com</td>
</tr>
<tr>
<td>80004</td>
<td>Travelocity.ca</td>
</tr>
</tbody>
</table>
</div><h2 id="error-messages" data-magellan-destination="error-messages">Error Messages</h2>
<p>When there are errors, the top points of sale and regions API always returns a 200 response.  The error message is specified in an error field in the response.  The following are some sample error messages:</p>
<pre><code class="lang-JSON">{
    &quot;error&quot;:&quot;No hotelId specified&quot;
}
</code></pre>
<pre><code class="lang-JSON">{
    &quot;error&quot;:&quot;No data found&quot;,
    &quot;hotelId&quot;:1234567890
}
</code></pre>
</div></div></div></div></div><footer class="row full-width" id="site-footer"><div class="large-8 large-centered columns"><div class="links text-center"><a class="link-item" href="https://www.expediapartnercentral.com" target="_blank">Expedia PartnerCentral</a> | <a class="link-item" href="https://expediagso.secure.force.com/kb/pkb_Home?l=en_US" target="_blank">Knowledge Base</a> | <a class="link-item" href="/terms">Terms and Conditions</a> | <a class="link-item" href="/privacy">Privacy Policy</a> | <a class="link-item" href="/license">License Agreement</a></div><div class="show-for-large"><div class="footer-logo">&nbsp;</div></div><div id="footer-copyright">&copy; 2017 Expedia, Inc. All rights reserved. Confidential and proprietary.</div></div></footer></body></html>